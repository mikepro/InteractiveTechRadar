<html>
    <head>
    <!--<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.4/angular.min.js"></script>-->
    <script type="text/javascript" src="lib/angularJS/angular.min.js"></script>
    <script type="text/javascript" src="techradarapp/techapp.js"></script>
    <script type="text/javascript" src="techradarapp/controllers/techRadarController.js"></script>
    <script type="text/javascript" src="techradarapp/services/TrigFunctions.js"></script>
    <script type="text/javascript" src="techradarapp/factories/TechRadarModel.js"></script>
    <script type="text/javascript" src="techradarapp/factories/BlipModel.js"></script>
    <script type="text/javascript" src="techradarapp/factories/RingModel.js"></script>
    <script type="text/javascript" src="techradarapp/services/BlipFunctions.js"></script>
    <script type="text/javascript" src="techradarapp/services/ClickableRing.js"></script>
    <script type="text/javascript" src="techradarapp/controllers/SelectedRingGroupController.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="stylesheet" type="text/css" href="svg.css"/>
    </head>
    <body ng-app="TechRadarApp" ng-controller="TechRadarController">
        <label>Search</label><input type="text" ng-model="searchTerm"/>
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
            <g transform="scale({{model.zoomLevel}})">
                <line class="svg-groupmarkers" ng-attr-x1="{{line.x1}}" ng-attr-y1="{{line.y1}}" ng-attr-x2="{{line.x2}}" ng-attr-y2="{{line.y2}}" ng-repeat="line in model.groupLines"/>
                <g ng-repeat="ring in model.rings">
                    <path class="svg-clickablering" ng-repeat="x in ring.clickableRings"  stroke-width="{{x.width}}" ng-attr-d="{{x.svgPath}}" ng-click="selectRingAndGroup($index,ring)"/>
                    <circle class="svg-ring" cx="500" cy="250" ng-attr-r="{{ring.radius}}" />
                    <circle class="svg-blip" ng-attr-highlighted="{{model.isHighlightedBlip(blip)?'true':'false'}}" ng-attr-blipselected="{{model.isSelectedBlip(blip)?'true':'false'}}" ng-mouseenter="model.highlightGivenBlip(blip)" ng-mouseleave="model.clearHighlightedBlip()" ng-click="model.selecteGivenBlip(blip)" ng-repeat="blip in ring.blips | filter:{name:searchTerm||undefined}" ng-attr-cx="{{blip.x}}" ng-attr-cy="{{blip.y}}" r="2"/>
                    <text class="svg-ringtext" ng-attr-x="{{ring.x}}" ng-attr-y="{{ring.y}}">{{ring.title}}</text>
                </g>
            </g>
        </svg>
        <div class="legend" id="group0">
            <h1>Group 0 blips</h1>
            <ul>
                <li ng-class="{'highlighted':model.isHighlightedBlip(blip),'selectedBlip':model.isSelectedBlip(blip)}" ng-repeat="blip in model.allBlipsForGroup(0)| filter:{name:searchTerm||undefined}">({{blip.id}}) {{blip.name}}</li>
            </ul>
        </div>
        <div class="legend" id="group1">
            <h1>Group 1 blips</h1>
            <ul>
                <li ng-class="{'highlighted':model.isHighlightedBlip(blip),'selectedBlip':model.isSelectedBlip(blip)}" ng-repeat="blip in model.allBlipsForGroup(1)| filter:{name:searchTerm||undefined}">({{blip.id}}) {{blip.name}}</li>
            </ul>
        </div>
        <div class="legend" id="group2">
            <h1>Group 2 blips</h1>
            <ul>
                <li ng-class="{'highlighted':model.isHighlightedBlip(blip),'selectedBlip':model.isSelectedBlip(blip)}" ng-repeat="blip in model.allBlipsForGroup(2)| filter:{name:searchTerm||undefined}">({{blip.id}}) {{blip.name}}</li>
            </ul>
        </div>
        <div class="legend" id="group3">
            <h1>Group 3 blips</h1>
            <ul>
                <li ng-class="{'highlighted':model.isHighlightedBlip(blip),'selectedBlip':model.isSelectedBlip(blip)}" ng-repeat="blip in model.allBlipsForGroup(3)| filter:{name:searchTerm||undefined}">({{blip.id}}) {{blip.name}}</li>
            </ul>
        </div>
        <div class="addNewBlip" style="width:300px" ng-controller="SelectedRingGroupController" ng-show="isVisible()">
            <h1>Ring {{ringName()}} for group{{group()}} </h1>
            <label>Id</label><input type="text" ng-model="id"/></br>
            <label>Title</label><input type="text" ng-model="name"/></br>
            <label>Is New</label><input type="checkbox" ng-model="isNew"/></br>
            <input type="button" ng-click="cancel()" value="Cancel"/>
            <input type="button" ng-click="save()" value="Save and close"/>
            <input type="button" ng-click="saveAndAdd()" value="Save and add"/>
        </div>
        <input type="button" value="+" ng-click="zoomIn()"/>
        <input type="button" value="-" ng-click="zoomOut()"/>
        <input type="button" value="addNewCircle()" ng-click="addRing()"/>
        <input type="button" value="removeCircle()" ng-click="removeRing()"/>
        <input type="button" value="addBlip(0)" ng-click="addBlip(0)"/>
        <input type="button" value="addBlip(1)" ng-click="addBlip(1)"/>
        <input type="button" value="addBlip(2)" ng-click="addBlip(2)"/>
        <input type="button" value="addBlip(3)" ng-click="addBlip(3)"/>
        <input type="button" value="removeBlip" ng-click="removeBlip()"/>
    </body>
</html>
